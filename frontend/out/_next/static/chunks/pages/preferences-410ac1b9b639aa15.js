(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[584],{9857:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/preferences",function(){return s(402)}])},6153:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(5893),l=s(1163);function o(e){let{children:t}=e,s=(0,l.useRouter)();return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("nav",{className:"bg-white shadow mb-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-3 flex justify-between items-center",children:[(0,a.jsx)("div",{className:"font-bold text-lg text-blue-700",children:"WWR Notify Me"}),(0,a.jsxs)("div",{className:"space-x-4",children:[(0,a.jsx)("a",{href:"/dashboard",className:"text-gray-700 hover:text-blue-700",children:"Dashboard"}),(0,a.jsx)("a",{href:"/preferences",className:"text-gray-700 hover:text-blue-700",children:"Preferences"}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),s.replace("/login")},className:"text-gray-700 hover:text-red-600 ml-2",children:"Logout"})]})]})}),(0,a.jsx)("main",{children:t})]})}},402:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(5893),l=s(7294),o=s(1163),r=s(7066),n=s(6153),i=s(7460),d=s.n(i),c=s(1990),u=s(4964),m=s(3681);function h(){(0,o.useRouter)();let[e,t]=(0,l.useState)("jobs"),[s,i]=(0,l.useState)(!1),[h,p]=(0,l.useState)([]),[x,g]=(0,l.useState)(!0),[b,f]=(0,l.useState)(!1),[j,y]=(0,l.useState)(!1),[v,N]=(0,l.useState)(""),[w,S]=(0,l.useState)(""),[k,C]=(0,l.useState)(""),[R,A]=(0,l.useState)(""),[B,_]=(0,l.useState)(null),[F,U]=(0,l.useState)(""),[L,I]=(0,l.useState)(""),[P,Z]=(0,l.useState)(""),[E,z]=(0,l.useState)([]),[J,W]=(0,l.useState)(null),[O,T]=(0,l.useState)([]),[D,V]=(0,l.useState)(!1),[K,M]=(0,l.useState)(new Set),[H,X]=(0,l.useState)(""),[Q,Y]=(0,l.useState)([]),[q,G]=(0,l.useState)(!1),[$,ee]=(0,l.useState)({name:"",email:""}),[et,es]=(0,l.useState)(!1),[ea,el]=(0,l.useState)(!1),[eo,er]=(0,l.useState)(""),[en,ei]=(0,l.useState)(""),[ed,ec]=(0,l.useState)(""),[eu,em]=(0,l.useState)(null),[eh,ep]=(0,l.useState)(!1),[ex,eg]=(0,l.useState)(null),[eb,ef]=(0,l.useState)(""),[ej,ey]=(0,l.useState)(!1);(0,l.useEffect)(()=>{i(!0)},[]),(0,l.useEffect)(()=>{s&&ef(localStorage.getItem("alertKeywords")||"")},[s]),(0,l.useEffect)(()=>{if(!s)return;ev(),eR();let t=Object.values(eN["jobs"===e?"job":"scholarship"]||{});z(t),console.log("Embedded feeds loaded immediately:",t),ew()},[e,s]);let ev=async()=>{g(!0);let t=localStorage.getItem("token");if(!t){A("No authentication token found"),g(!1);return}try{let s=await r.Z.get("".concat("http://localhost:4000","/api/user/rss-feeds?type=").concat("jobs"===e?"job":"scholarship"),{headers:{Authorization:"Bearer ".concat(t)}});p(s.data.feeds||[]);let a=new Set(s.data.feeds.map(e=>e.url));M(a)}catch(e){A("Failed to load RSS feeds")}finally{g(!1)}},eN={job:{"default-jobs":{name:"Default Jobs",type:"job",feeds:[{_id:"embedded-job-1",name:"Jobs Found",description:"Curated remote job opportunities from Jobs Found RSS feed",url:"https://rss.app/feeds/Ved3zhgCZQ7I2XNo.xml",source:"Jobs Found (RSS.app)",category:"default-jobs"},{_id:"embedded-job-2",name:"Himalayas Remote Jobs",description:"Remote job opportunities from Himalayas job board",url:"https://himalayas.app/jobs/rss",source:"Himalayas",category:"default-jobs"},{_id:"embedded-job-3",name:"We Work Remotely",description:"Remote job opportunities from We Work Remotely",url:"https://weworkremotely.com/remote-jobs.rss",source:"We Work Remotely",category:"default-jobs"}]}},scholarship:{"default-scholarships":{name:"Default Scholarships",type:"scholarship",feeds:[{_id:"embedded-scholarship-1",name:"Scholarships Region",description:"Regional scholarship opportunities and funding programs",url:"https://rss.app/feeds/VxzvBe8gQnW32JhP.xml",source:"Scholarships Region (RSS.app)",category:"default-scholarships"},{_id:"embedded-scholarship-2",name:"Scholarships and Aid",description:"Comprehensive scholarships and financial aid opportunities",url:"https://rss.app/feeds/dh2Nxk5zrvEhzRd3.xml",source:"Scholarships & Aid (RSS.app)",category:"default-scholarships"}]}}};console.log("Embedded predefined feeds loaded:",eN);let ew=async()=>{V(!0);let t=Object.values(eN["jobs"===e?"job":"scholarship"]||{});z(t),V(!1);try{let s=await r.Z.get("".concat("http://localhost:4000","/api/predefined-feeds/categories?type=").concat("jobs"===e?"job":"scholarship"));s.data.categories&&s.data.categories.length>t.length&&z(s.data.categories)}catch(e){console.log("API not available, using embedded predefined feeds (already loaded)")}},eS=async t=>{W(t);let s=null;for(let[a,l]of Object.entries(eN["jobs"===e?"job":"scholarship"]||{}))if(l.name===t.name||l.category===t.name||a===t.name){s=l;break}console.log("Category clicked:",t.name),console.log("Found embedded category:",s),s?(T(s.feeds||[]),console.log("Setting category feeds:",s.feeds)):(console.log("No embedded category found, setting empty feeds"),T([]));try{var a;let l=await r.Z.get("".concat("http://localhost:4000","/api/predefined-feeds/categories/").concat("jobs"===e?"job":"scholarship","/").concat(t.name));l.data.feeds&&l.data.feeds.length>((null==s?void 0:null===(a=s.feeds)||void 0===a?void 0:a.length)||0)&&T(l.data.feeds)}catch(e){console.log("API not available, using embedded category feeds (already loaded)")}},ek=async(t,s)=>{var a,l,o;f(!0),A("");let n=localStorage.getItem("token");if(t.startsWith("embedded-"))try{let l=t,o="jobs"===e?"job":"scholarship";for(let[e,s]of Object.entries(eN[o]||{})){let e=null===(a=s.feeds)||void 0===a?void 0:a.find(e=>e._id===t);if(e){l=e.name;break}}await r.Z.post("".concat("http://localhost:4000","/api/user/rss-feeds"),{url:s,name:l,type:"jobs"===e?"job":"scholarship",category:"jobs"===e?"default-jobs":"default-scholarships"},{headers:{Authorization:"Bearer ".concat(n)}}),y(!0),M(e=>new Set([...e,s])),ev(),setTimeout(()=>y(!1),2e3)}catch(e){y(!0),M(e=>new Set([...e,s])),setTimeout(()=>y(!1),2e3)}finally{f(!1)}else try{await r.Z.post("".concat("http://localhost:4000","/api/predefined-feeds/add-to-user"),{predefinedFeedId:t},{headers:{Authorization:"Bearer ".concat(n)}}),y(!0),M(e=>new Set([...e,s])),ev(),setTimeout(()=>y(!1),2e3)}catch(e){A((null===(o=e.response)||void 0===o?void 0:null===(l=o.data)||void 0===l?void 0:l.error)||"Failed to add feed")}finally{f(!1)}},eC=async()=>{if(H.trim()){G(!0),A("");try{let t="jobs"===e?"/api/jobs/search":"/api/scholarships/search",s=await r.Z.get("".concat("http://localhost:4000").concat(t),{params:{query:H,limit:20}});"jobs"===e?Y(s.data.jobs||[]):Y(s.data.scholarships||[])}catch(e){A("Failed to search. Please try again."),Y([])}finally{G(!1)}}},eR=async()=>{es(!0),er("");let e=localStorage.getItem("token");if(!e){er("No authentication token found"),es(!1);return}try{let t=await r.Z.get("".concat("http://localhost:4000","/api/user/profile"),{headers:{Authorization:"Bearer ".concat(e)}});ee({name:t.data.name,email:t.data.email})}catch(e){er("Failed to load profile")}finally{es(!1)}},eA=async()=>{es(!0),er(""),el(!1);let e=localStorage.getItem("token");try{await r.Z.put("".concat("http://localhost:4000","/api/user/profile"),{name:$.name,email:$.email,password:en||void 0},{headers:{Authorization:"Bearer ".concat(e)}}),el(!0),ei("")}catch(e){er("Failed to update profile")}finally{es(!1)}},eB=async()=>{if(f(!0),A(""),y(!1),h.some(e=>e.url.trim().toLowerCase()===v.trim().toLowerCase())){A("This feed already exists."),f(!1);return}let t=localStorage.getItem("token");try{await r.Z.post("".concat("http://localhost:4000","/api/user/rss-feeds"),{url:v,name:w,apiBackupUrl:k,type:"jobs"===e?"job":"scholarship"},{headers:{Authorization:"Bearer ".concat(t)}}),N(""),S(""),C(""),y(!0),ev()}catch(e){var s,a;A((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.error)||"Failed to add RSS feed")}finally{f(!1)}},e_=async e=>{f(!0),A(""),y(!1);let t=localStorage.getItem("token");try{await r.Z.delete("".concat("http://localhost:4000","/api/user/rss-feeds/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),y(!0),ev()}catch(e){A("Failed to delete RSS feed")}finally{f(!1)}},eF=e=>{_(e._id),U(e.url),I(e.name||""),Z(e.apiBackupUrl||"")},eU=async e=>{f(!0),A(""),y(!1);let t=localStorage.getItem("token");try{await r.Z.put("".concat("http://localhost:4000","/api/user/rss-feeds/").concat(e),{url:F,name:L,apiBackupUrl:P},{headers:{Authorization:"Bearer ".concat(t)}}),_(null),y(!0),ev()}catch(e){A("Failed to edit RSS feed")}finally{f(!1)}},eL=async()=>{ep(!0),eg(null);let t=localStorage.getItem("token"),s=[];function a(e){return e.replace(/[-_]/g," ").replace(/(?:^|\s|\.|\/|:)([a-z])/g,(e,t)=>t?t.toUpperCase():"").replace(/\s+/g,"")}ed.trim()&&(s=s.concat(ed.split("\n").map(e=>e.trim()).filter(Boolean).flatMap(e=>e.includes(",")?e.split(",").map(e=>e.trim()).filter(Boolean).map(e=>({url:e})):[{url:e}]))),s=s.map(e=>{if(!e.name||!e.name.trim())try{let t=new URL(e.url),s=t.hostname.replace(/^www\./,"").split(".")[0];return s||(s=t.hostname),s=a(s),{...e,name:s}}catch(s){let t=e.url.split(/[./]/).filter(Boolean)[0]||"Feed";return t=a(t),{...e,name:t}}return e});let l=h.map(e=>e.url.trim().toLowerCase()),o=s.filter(e=>!l.includes(e.url.trim().toLowerCase())),n=s.length-o.length;if(eu&&await new Promise((e,t)=>{d().parse(eu,{header:!0,skipEmptyLines:!0,complete:t=>{if(t.errors.length){eg({error:"CSV parse error: "+t.errors[0].message}),e();return}s=s.concat(t.data.map(e=>({url:e.url||e.URL||"",name:e.name||e.Name||"",apiBackupUrl:e.apiBackupUrl||e.APIBackupUrl||e["API Backup URL"]||""})).filter(e=>e.url)),e()},error:t=>{eg({error:"CSV parse error: "+t.message}),e()}})}),!o.length){eg({error:n?"All feeds already exist. (".concat(n," skipped)"):"No valid feeds found."}),ep(!1);return}let i=0,c=0,u=[];for(let s of o)try{await r.Z.post("".concat("http://localhost:4000","/api/user/rss-feeds"),{...s,type:"jobs"===e?"job":"scholarship"},{headers:{Authorization:"Bearer ".concat(t)}}),i++}catch(e){var m,p;c++,u.push(s.url+": "+((null===(p=e.response)||void 0===p?void 0:null===(m=p.data)||void 0===m?void 0:m.error)||e.message))}eg({successCount:i,failCount:c,errors:u,skippedCount:n}),ec(""),em(null),ev(),ep(!1)},[eI,eP]=(0,l.useState)([]),eZ=e=>{eP(eI.includes(e)?eI.filter(t=>t!==e):[...eI,e])},eE=async()=>{if(!eI.length)return;f(!0),A(""),y(!1);let e=localStorage.getItem("token");try{await Promise.all(eI.map(t=>r.Z.delete("".concat("http://localhost:4000","/api/user/rss-feeds/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}}))),y(!0),eP([]),ev()}catch(e){A("Failed to delete selected RSS feeds")}finally{f(!1)}};return(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto py-10 px-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-8",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-blue-800 mb-2 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-blue-400"}),"Profile Details"]}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Update your profile information and password."}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Name",value:$.name,onChange:e=>ee({...$,name:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,a.jsx)("input",{type:"email",placeholder:"Email",value:$.email,onChange:e=>ee({...$,email:e.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),(0,a.jsx)("input",{type:"password",placeholder:"New Password (leave blank to keep current)",value:en,onChange:e=>ei(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 mb-2"}),(0,a.jsx)("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition font-semibold mt-2",onClick:eA,disabled:et,children:et?"Saving...":"Save Profile"}),eo&&(0,a.jsx)("p",{className:"text-red-600 mt-2 font-medium",children:eo}),ea&&(0,a.jsx)("p",{className:"text-green-600 mt-2 font-medium",children:"Profile updated!"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-8",children:[(0,a.jsxs)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg mb-6",children:[(0,a.jsxs)("button",{className:"flex-1 flex items-center justify-center px-4 py-2 rounded-md font-medium transition ".concat("jobs"===e?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),onClick:()=>t("jobs"),children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 mr-2"}),"Remote Jobs"]}),(0,a.jsxs)("button",{className:"flex-1 flex items-center justify-center px-4 py-2 rounded-md font-medium transition ".concat("scholarships"===e?"bg-white text-green-600 shadow-sm":"text-gray-600 hover:text-gray-900"),onClick:()=>t("scholarships"),children:[(0,a.jsx)(u.Z,{className:"w-5 h-5 mr-2"}),"Scholarships"]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:["Search Latest ","jobs"===e?"Jobs":"Scholarships"," Online"]}),(0,a.jsxs)("p",{className:"text-gray-600 mb-4",children:["Search for the most recent ","jobs"===e?"job opportunities":"scholarship opportunities"," from multiple online sources."]}),(0,a.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search for ".concat("jobs"===e?"jobs":"scholarships","..."),value:H,onChange:e=>X(e.target.value),onKeyPress:e=>"Enter"===e.key&&eC(),className:"flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,a.jsx)("button",{onClick:eC,disabled:q||!H.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:q?"Searching...":"Search"})]}),Q.length>0&&(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("h3",{className:"font-semibold text-gray-800 mb-3",children:["Found ",Q.length," ","jobs"===e?"jobs":"scholarships"]}),(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:Q.map((t,s)=>(0,a.jsxs)("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-800 mb-1",children:(0,a.jsx)("a",{href:t.url||t.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:t.title})}),"jobs"===e?(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[t.company&&(0,a.jsxs)("span",{className:"mr-3",children:["Company: ",t.company]}),t.location&&(0,a.jsxs)("span",{className:"mr-3",children:["Location: ",t.location]}),t.type&&(0,a.jsxs)("span",{children:["Type: ",t.type]})]}):(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[t.amount&&(0,a.jsxs)("span",{className:"mr-3",children:["Amount: ",t.amount]}),t.deadline&&(0,a.jsxs)("span",{className:"mr-3",children:["Deadline: ",t.deadline]}),t.level&&(0,a.jsxs)("span",{children:["Level: ",t.level]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Source: ",t.source]})]},s))})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:["Browse ","jobs"===e?"Job":"Scholarship"," Feed Categories"]}),D?(0,a.jsx)("div",{className:"text-center py-4",children:"Loading categories..."}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 cursor-pointer hover:border-blue-300 hover:shadow-md transition",onClick:()=>eS(e),children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[e.feeds.length," feeds available"]}),(0,a.jsx)("button",{className:"text-blue-600 text-sm font-medium hover:text-blue-700",children:"View Feeds →"})]},e.name))})]}),J&&(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:[J.name," Feeds"]}),(0,a.jsx)("button",{onClick:()=>W(null),className:"text-gray-500 hover:text-gray-700",children:"\xd7 Close"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:O.map(e=>{let t=K.has(e.url);return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:e.name}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),e.source&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mb-3",children:["Source: ",e.source]}),t?(0,a.jsxs)("div",{className:"flex items-center justify-center w-full px-3 py-2 bg-green-100 text-green-700 rounded-md font-medium text-sm",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Added to My Feeds"]}):(0,a.jsxs)("button",{onClick:()=>ek(e._id,e.url),disabled:b,className:"flex items-center justify-center w-full px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 mr-1"}),b?"Adding...":"Add to My Feeds"]})]},e._id)})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:["Manage Your ","jobs"===e?"Job":"Scholarship"," RSS Feeds"]}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["Add, edit, or remove your ","jobs"===e?"job":"scholarship"," RSS feeds. These feeds power your ","jobs"===e?"job":"scholarship"," dashboard."]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2 text-blue-700",children:"Bulk Upload RSS Feeds"}),(0,a.jsx)("p",{className:"text-gray-500 mb-2",children:"Paste a list of feed URLs (one per line), or upload a CSV file with columns: url, name (optional), apiBackupUrl (optional)."}),(0,a.jsx)("textarea",{className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 mb-2",rows:4,placeholder:"https://example.com/feed1.rss\\nhttps://example.com/feed2.rss",value:ed,onChange:e=>ec(e.target.value),disabled:eh}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,a.jsx)("input",{type:"file",accept:".csv",onChange:e=>em(e.target.files[0]),disabled:eh,className:""}),(0,a.jsx)("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition font-semibold",onClick:eL,disabled:eh||!ed.trim()&&!eu,children:eh?"Uploading...":"Bulk Add Feeds"})]}),ex&&(0,a.jsxs)("div",{className:"mt-2",children:[ex.error&&(0,a.jsx)("p",{className:"text-red-600 font-medium",children:ex.error}),ex.successCount>0&&(0,a.jsxs)("p",{className:"text-green-600 font-medium",children:[ex.successCount," feeds added!"]}),ex.failCount>0&&(0,a.jsxs)("p",{className:"text-yellow-600 font-medium",children:[ex.failCount," failed."]}),ex.skippedCount>0&&(0,a.jsxs)("p",{className:"text-purple-600 font-medium",children:[ex.skippedCount," already exist."]}),ex.errors&&ex.errors.length>0&&(0,a.jsx)("ul",{className:"text-xs text-red-500 mt-1 list-disc ml-5",children:ex.errors.map((e,t)=>(0,a.jsx)("li",{children:e},t))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2 text-blue-700",children:"Add New RSS Feed"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Feed URL (e.g. https://example.com/jobs.rss)",value:v,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Feed Name (optional)",value:w,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,a.jsx)("input",{type:"text",placeholder:"API Backup URL (optional)",value:k,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),(0,a.jsx)("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition font-semibold mt-2",onClick:eB,disabled:b||!v,children:b?"Adding...":"Add Feed"}),R&&(0,a.jsx)("p",{className:"text-red-600 mt-2 font-medium",children:R}),j&&(0,a.jsx)("p",{className:"text-green-600 mt-2 font-medium",children:"Success!"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2 mt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-blue-700",children:"Your RSS Feeds"}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("button",{className:"px-4 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold text-sm",onClick:()=>{if(!h.length)return;let t=new Blob([d().unparse(h.map(e=>{let{url:t,name:s,apiBackupUrl:a}=e;return{url:t,name:s,apiBackupUrl:a}}))],{type:"text/csv"}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="".concat(e,"-rss-feeds.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s)},disabled:!h.length,children:"Export as CSV"}),(0,a.jsx)("button",{className:"px-4 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 font-semibold text-sm",onClick:eE,disabled:!eI.length||b,children:"Delete Selected"}),(0,a.jsxs)("label",{className:"flex items-center gap-1 ml-2 cursor-pointer select-none",children:[(0,a.jsx)("input",{type:"checkbox",checked:eI.length===h.length&&h.length>0,onChange:()=>{eI.length===h.length?eP([]):eP(h.map(e=>e._id))},className:"accent-blue-600",title:"Select All"}),(0,a.jsx)("span",{className:"text-xs text-gray-700",children:"Select All"})]})]})]}),0===h.length?(0,a.jsx)("p",{className:"text-gray-500",children:"No RSS feeds added yet."}):(0,a.jsx)("ul",{className:"divide-y",children:h.map(e=>(0,a.jsxs)("li",{className:"py-4 flex items-center justify-between gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:eI.includes(e._id),onChange:()=>eZ(e._id),className:"mr-3 accent-blue-600",title:"Select feed"}),B===e._id?(0,a.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-2",children:[(0,a.jsx)("input",{type:"text",value:F,onChange:e=>U(e.target.value),className:"w-full px-2 py-1 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,a.jsx)("input",{type:"text",value:L,onChange:e=>I(e.target.value),className:"w-full px-2 py-1 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,a.jsx)("input",{type:"text",value:P,onChange:e=>Z(e.target.value),className:"w-full px-2 py-1 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2 md:mt-0 md:col-span-3",children:[(0,a.jsx)("button",{className:"px-4 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold",onClick:()=>eU(e._id),disabled:b,children:"Save"}),(0,a.jsx)("button",{className:"px-4 py-1 bg-gray-400 text-white rounded-lg hover:bg-gray-500 font-semibold",onClick:()=>_(null),disabled:b,children:"Cancel"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-lg text-gray-900",children:e.name||e.url}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.url}),e.apiBackupUrl&&(0,a.jsxs)("div",{className:"text-xs text-blue-700",children:["API: ",e.apiBackupUrl]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{className:"px-4 py-1 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 font-semibold",onClick:()=>eF(e),disabled:b,children:"Edit"}),(0,a.jsx)("button",{className:"px-4 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 font-semibold",onClick:()=>e_(e._id),disabled:b,children:"Delete"})]})]})]},e._id))})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-8",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-blue-800 mb-2 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-blue-400"}),"jobs"===e?"Job":"Scholarship"," Alert Keywords"]}),(0,a.jsxs)("p",{className:"text-gray-600 mb-4",children:["Enter keywords to get notified when a ","jobs"===e?"job title":"scholarship title"," matches. Separate keywords with commas or new lines."]}),(0,a.jsx)("textarea",{className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 mb-2",rows:3,placeholder:"jobs"===e?"e.g. React, Remote, Senior":"e.g. Computer Science, Undergraduate, USA",value:eb,onChange:e=>ef(e.target.value)}),(0,a.jsx)("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition font-semibold mt-2",onClick:()=>{localStorage.setItem("alertKeywords",eb),ey(!0),setTimeout(()=>ey(!1),2e3)},children:"Save Keywords"}),ej&&(0,a.jsx)("p",{className:"text-green-600 mt-2 font-medium",children:"Keywords saved!"})]})]})})}}},function(e){e.O(0,[143,869,888,774,179],function(){return e(e.s=9857)}),_N_E=e.O()}]);